<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jujutsu Kaisen — Wiki Unificada</title>
  <style>
    /* ===============================
       CONFIGURAÇÕES GERAIS E VARIÁVEIS
    ================================ */
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #7c3aed;
      --accent-glow: rgba(124, 58, 237, 0.5);
      --glass: rgba(255, 255, 255, 0.03);
      --muted: #9aa4b2;
      --text: #e6eef6;
    }

    * { box-sizing: border-box; }
    
    /* Transições suaves para troca de tema */
    body, .card, .modal, .tab-btn, header, .grade-badge, .logo, input, select, button {
      transition: background 0.6s ease, color 0.6s ease, border-color 0.6s ease, box-shadow 0.6s ease;
    }

    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden; /* Impede scroll lateral das partículas */
    }

    /* ===============================
       EFEITOS DE FUNDO (BACKGROUNDS)
    ================================ */
    
    /* Container fixo para efeitos de fundo para não interferir no scroll */
    #bg-effects {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      transition: opacity 1s ease;
    }

    /* 1. TEMA PADRÃO (Jardim das Sombras): Fluidez */
    /* Animação de líquido escuro */
    body:not(.theme-gojo):not(.theme-sukuna) #bg-effects {
      background: linear-gradient(125deg, #071025, #0f1724, #1e1b4b, #071025);
      background-size: 400% 400%;
      animation: shadowFluid 15s ease infinite;
    }

    @keyframes shadowFluid {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* 2. TEMA GOJO (Vazio Infinito): Partículas Brancas */
    body.theme-gojo #bg-effects {
      background: #020617;
    }
    
    /* Cria as partículas usando gradientes radiais múltiplos */
    body.theme-gojo #bg-effects::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(white 1px, transparent 1px),
        radial-gradient(white 1px, transparent 1px);
      background-size: 50px 50px;
      background-position: 0 0, 25px 25px;
      animation: infiniteVoidParticles 4s linear infinite;
      opacity: 0.4;
    }
    
    /* Segunda camada de partículas para profundidade */
    body.theme-gojo #bg-effects::after {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(rgba(255,255,255,0.5) 1px, transparent 1px);
      background-size: 90px 90px;
      animation: infiniteVoidParticles 8s linear infinite reverse;
      opacity: 0.2;
    }

    @keyframes infiniteVoidParticles {
      from { transform: translateY(0) scale(1); }
      to { transform: translateY(-50px) scale(1.1); }
    }

    /* 3. TEMA SUKUNA (Santuário): Fundo Sólido Ameaçador */
    body.theme-sukuna #bg-effects {
      background: linear-gradient(180deg, #1a0505 0%, #2b0b0b 100%);
    }

    /* ===============================
       LAYOUT & HEADER
    ================================ */

    header { padding: 24px 20px 0 20px; display: flex; flex-direction: column; gap: 20px; }
    .top-bar { display: flex; gap: 16px; align-items: center; justify-content: space-between; flex-wrap: wrap; }
    
    .brand { display: flex; gap: 12px; align-items: center; }
    .logo {
      width: 56px; height: 56px; border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), #2563eb);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 20px; color: white; flex-shrink: 0;
      box-shadow: 0 0 15px var(--accent-glow);
    }
    h1 { margin: 0; font-size: 20px; }
    p.lead { margin: 0; color: var(--muted); font-size: 13px; }

    /* Controles (Search + Select + Botão Domínio) */
    .controls { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    
    input.search { 
      background: var(--glass); border: 1px solid rgba(255, 255, 255, 0.1); 
      padding: 10px 12px; border-radius: 8px; color: inherit; width: 200px; outline: none;
    }
    input.search:focus { border-color: var(--accent); }

    select { 
      background: var(--glass); border: 1px solid rgba(255, 255, 255, 0.1); 
      padding: 10px; border-radius: 8px; color: inherit; cursor: pointer; outline: none;
    }
    option { background: #0b1220; color: white; }

    /* Botão de Domínio (Novo Estilo no Header) */
    .domain-control-wrapper {
      position: relative;
    }

    .domain-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0 16px;
      height: 38px; /* Altura igual ao input */
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 0 15px var(--accent-glow);
    }
    .domain-btn:hover { filter: brightness(1.2); }

    /* Dropdown de Temas */
    .theme-dropdown {
      position: absolute;
      top: 120%;
      right: 0;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 180px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-10px);
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 50;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .domain-control-wrapper.open .theme-dropdown {
      opacity: 1;
      pointer-events: all;
      transform: translateY(0);
    }

    .theme-option {
      background: transparent;
      border: none;
      color: var(--muted);
      padding: 8px 12px;
      text-align: left;
      cursor: pointer;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 13px;
      transition: all 0.2s;
    }
    .theme-option:hover {
      background: rgba(255,255,255,0.05);
      color: white;
    }
    
    .dot { width: 10px; height: 10px; border-radius: 50%; }
    .dot-default { background: #7c3aed; box-shadow: 0 0 8px #7c3aed; }
    .dot-sukuna { background: #dc2626; box-shadow: 0 0 8px #dc2626; }
    .dot-gojo { background: #38bdf8; box-shadow: 0 0 8px #38bdf8; }

    /* ===============================
       ESTILOS DOS CARDS E AURA
    ================================ */
    /* Aura roxa */
    .card { position: relative; overflow: hidden; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius: 12px; padding: 12px; border: 1px solid rgba(255,255,255,0.03); cursor: pointer; display: flex; flex-direction: column; }
    
    .card::before {
      content: ""; position: absolute; inset: -6px;
      background: radial-gradient(circle at top, var(--accent), rgba(124, 58, 237, 0.3), transparent 65%);
      opacity: 0; filter: blur(18px); transition: opacity 0.4s ease; z-index: 0;
    }
    
    /* Aura vermelha (Antagonista) */
    .card.antagonista::before {
      background: radial-gradient(circle at top, rgba(220, 38, 38, 0.75), rgba(153, 27, 27, 0.45), transparent 65%);
    }
    
    .card:hover::before { opacity: 1; }
    .card:hover { transform: translateY(-6px); border-color: var(--accent-glow); }
    .card > * { position: relative; z-index: 1; }

    /* Pulsações */
    @keyframes cursedPulse { 0% { box-shadow: 0 0 0 rgba(0,0,0,0); } 50% { box-shadow: 0 0 40px var(--accent-glow); } 100% { box-shadow: 0 0 0 rgba(0,0,0,0); } }
    .card:hover { animation: cursedPulse 1.3s infinite; }
    .card.antagonista:hover { animation: cursedPulse 1.3s infinite; } /* Reusa animação mas a cor vem do glow variavel se quiser, mas aqui mantivemos o css base */

    /* ===============================
       CONTEÚDO PRINCIPAL (Grid, Modal, Tabs)
    ================================ */
    .tabs { display: flex; gap: 24px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-top: 10px; padding: 0 20px; }
    .tab-btn { background: none; border: none; color: var(--muted); font-size: 16px; padding: 12px 0; cursor: pointer; position: relative; }
    .tab-btn.active { color: var(--text); font-weight: 700; }
    .tab-btn.active::after { content: ''; position: absolute; bottom: -1px; left: 0; width: 100%; height: 2px; background: var(--accent); box-shadow: 0 -2px 10px var(--accent); }

    main { padding: 20px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }

    .grade-badge { position: absolute; top: 12px; right: 12px; font-size: 10px; font-weight: 800; padding: 4px 8px; border-radius: 6px; text-transform: uppercase; z-index: 2; backdrop-filter: blur(4px); }
    .grade-special { background: linear-gradient(135deg, #ef4444, #b91c1c); color: white; }
    .grade-1 { background: #2563eb; color: white; }

    .avatar { width: 100%; height: 220px; border-radius: 8px; object-fit: cover; background: #111827; margin-bottom: 12px; }
    .name { font-weight: 700; margin: 0; font-size: 17px; }
    .role { font-size: 12px; color: var(--accent); font-weight: 600; margin-top: 4px; text-transform: uppercase; }
    .short { color: var(--muted); margin-top: 8px; font-size: 13px; line-height: 1.4; flex-grow: 1; }
    .tags { margin-top: 12px; display: flex; gap: 6px; flex-wrap: wrap; }
    .tag { font-size: 11px; padding: 4px 8px; border-radius: 6px; background: rgba(255, 255, 255, 0.05); color: #cbd5e1; }

    /* Modal */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(8px); padding: 20px; }
    .modal { width: min(850px, 100%); background: var(--card); border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); max-height: 90vh; overflow-y: auto; position: relative; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
    .modal-content { display: flex; gap: 32px; padding: 32px; }
    .thumb { width: 280px; height: 400px; border-radius: 12px; object-fit: cover; flex-shrink: 0; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
    .close { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.05); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 20px; z-index: 10; }

    @media (max-width: 750px) {
      .modal-content { flex-direction: column; align-items: center; }
      .thumb { width: 100%; height: 250px; }
      .top-bar { flex-direction: column; align-items: flex-start; }
      .controls { width: 100%; }
      .search { flex: 1; }
    }

    /* ===============================
       ANIMAÇÃO DE EXPANSÃO (OVERLAY)
    ================================ */
    #domainOverlay {
      position: fixed; inset: 0; z-index: 999; pointer-events: none; display: flex; align-items: center; justify-content: center;
    }
    #domainOverlay::before {
      content: ''; position: absolute; width: 100px; height: 100px; border-radius: 50%;
      background: var(--anim-color, var(--accent));
      transform: scale(0); opacity: 0; transition: transform 1s cubic-bezier(0.7, 0, 0.3, 1), opacity 0.3s;
    }
    body.expanding #domainOverlay::before { transform: scale(40); opacity: 1; }
    
    /* Overlay do Modal ao abrir (Zoom effect) */
    .domain-modal-bg {
      position: fixed; inset: 0; z-index: 95;
      background: radial-gradient(circle, var(--accent-glow), rgba(0,0,0,0.95) 80%);
      animation: fadeIn 0.4s ease-out;
    }
    @keyframes fadeIn { from { opacity: 0; transform: scale(1.1); } to { opacity: 1; transform: scale(1); } }

    /* ===============================
       VARIAÇÕES DE TEMAS (CSS VARIABLES)
    ================================ */
    /* SUKUNA */
    body.theme-sukuna {
      --bg: #1a0505; --card: #2b0b0b; --accent: #dc2626;
      --accent-glow: rgba(220, 38, 38, 0.6); --muted: #fca5a5;
    }
    body.theme-sukuna .logo { background: linear-gradient(135deg, #7f1d1d, #ef4444); }

    /* GOJO */
    body.theme-gojo {
      --bg: #0c1528; --card: #142038; --accent: #38bdf8;
      --accent-glow: rgba(56, 189, 248, 0.6); --muted: #94a3b8;
    }
    body.theme-gojo .logo { background: linear-gradient(135deg, #0ea5e9, #bae6fd); color: #0c1528; }

  </style>
</head>
<body>

  <div id="bg-effects"></div>

  <div id="domainOverlay"></div>

  <header>
    <div class="top-bar">
      <div class="brand">
        <div class="logo">JK</div>
        <div>
          <h1>Jujutsu Kaisen — Wiki</h1>
          <p class="lead">Enciclopédia de feiticeiros e maldições.</p>
        </div>
      </div>
      
      <div class="controls">
        <input class="search" placeholder="Pesquisar..." id="search" />
        <select id="filter">
          <option value="all">Todas as Classes</option>
          <option value="aluno">Alunos</option>
          <option value="professor">Professores</option>
          <option value="antagonista">Antagonistas</option>
          <option value="especial">Grau Especial</option>
        </select>

        <div class="domain-control-wrapper" id="domainWrapper">
          <button class="domain-btn" onclick="toggleDomainMenu()">
            <span>⚡</span> Domínio
          </button>
          
          <div class="theme-dropdown">
            <button class="theme-option" onclick="changeTheme('default')">
              <span class="dot dot-default"></span> Padrão
            </button>
            <button class="theme-option" onclick="changeTheme('gojo')">
              <span class="dot dot-gojo"></span> Vazio Infinito
            </button>
            <button class="theme-option" onclick="changeTheme('sukuna')">
              <span class="dot dot-sukuna"></span> Santuário Malev.
            </button>
          </div>
        </div>

      </div>
    </div>
  </header>

  <div class="tabs">
    <button class="tab-btn active" data-tab="chars" onclick="switchTab('chars')">Personagens</button>
    <button class="tab-btn" data-tab="fights" onclick="switchTab('fights')">Grandes Lutas</button>
    <button class="tab-btn" data-tab="powers" onclick="switchTab('powers')">Poderes</button>
  </div>
  
  <main>
    <div class="grid" id="grid"></div>
  </main>
  
  <div id="modalRoot"></div>

  <script>
    // ===============================================
    // DADOS (Mesmos dados anteriores)
    // ===============================================
    const characters = [
      {
         id: 'yuji',
        name: 'Yuji Itadori',
        role: 'Aluno',
        grade: '1º Ano',
        gradeClass: 'grade-1',
        short: 'Protagonista com grande força física e bom coração.',
        bio: `Yuji Itadori é o protagonista da série. Inicialmente um estudante comum, ele acaba consumindo um dedo de Sukuna para salvar amigos e se torna o receptáculo do Rei das Maldições. Mesmo com esse fardo, Yuji luta para proteger os outros e decidir seu próprio destino.`,
        image: 'https://i.redd.it/gd7366srixsc1.png',
        tags: ['Protagonista','Receptáculo','Aluno']
      },
      {
        id: 'megumi',
        name: 'Megumi Fushiguro',
        role: 'Aluno',
        grade: 'º Ano',
        gradeClass: 'grade-1',
        short: 'Técnico e calmo — usa técnicas de shikigami.',
        bio: `Megumi é um jovem feiticeiro sério e reservado, especialista em Técnicas de Invocação (Shikigami). Ele é um aliado de Yuji e tem uma forte noção de justiça. Vem de um clã com regras complexas, e seu potencial chama a atenção de Sukuna.`,
        image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFfSK1Y_SBXbeCkb_tlvPQGYn4C2XSOXAprA&s',
        tags: ['Aluno','Shikigami', 'Receptáculo' , 'Clã Fushiguro']
      },
      {
        id: 'nobara',
        name: 'Nobara Kugisaki',
        role: 'Aluno',
        grade: '1º Ano',
        gradeClass: 'grade-1',
        short: 'Determinada, direta e poderosa em combate.',
        bio: `Nobara é uma feiticeira confiante e orgulhosa. Ela utiliza técnicas que envolvem pregos e bonecos de palha combinadas com energia amaldiçoada. Nobara valoriza sua identidade e enfrenta inimigos com muito estilo e agressividade.`,
        image: 'https://upload.wikimedia.org/wikipedia/en/8/86/NobaraKugisaki.png',
        tags: ['Aluno','Vodu']
      },
      {
        id: 'gojo',
        name: 'Satoru Gojo',
        role: 'Professor',
        grade: 'Especial',
        gradeClass: 'grade-special',
        short: 'O feiticeiro mais forte — carismático e arrogante.',
        bio: `Satoru Gojo é professor na Escola Técnica e é amplamente considerado o feiticeiro mais poderoso do mundo. Ele possui os 'Seis Olhos' e a técnica do 'Ilimitado', tornando-o praticamente intocável.`,
        image: 'https://upload.wikimedia.org/wikipedia/pt/0/02/Satoru_Gojo.png',
        tags: ['Professor','Especial', 'Seis Olhos', 'Ilimitado', 'Vazio Roxo']
      },
      {
        id: 'sukuna',
        name: 'Ryomen Sukuna',
        role: 'Antagonista',
        grade: 'Especial',
        gradeClass: 'grade-special',
        short: 'O Rei das Maldições — cruel e com imenso poder.',
        bio: `Sukuna é o principal antagonista: uma maldição de poder incalculável. Sádico e manipulador, ele busca o caos absoluto e possui um interesse misterioso em Megumi Fushiguro.`,
        image: 'https://upload.wikimedia.org/wikipedia/pt/a/a9/Ryomen_Sukuna.png',
        tags: ['Antagonista','Rei das Maldições', 'Cruel']
      },
      {
        id: 'toji',
        name: 'Toji Fushiguro',
        role: 'Vilão',
        grade: 'Especial',
        gradeClass: 'grade-special',
        short: 'O Assassino de Feiticeiros.',
        bio: `Toji é um assassino infame conhecido por não possuir energia amaldiçoada devido a uma Restrição Celestial, o que lhe conferiu capacidades físicas sobre-humanas. Ele usa armas amaldiçoadas para enfrentar feiticeiros de alto nível.`,
        image: 'https://pnganime.com/images/download/toji-fushiguro-manga-transparent-png',
        tags: ['Vilão','Restrição Celestial', 'Assassino de Feiticeiros', 'Clã Fushiguro', 'Armas Amaldiçoadas']
      },
      {
        id: 'nanami',
        name: 'Kento Nanami',
        role: 'Professor',
        grade: 'Grau 1',
        gradeClass: 'grade-1',
        short: 'Feiticeiro sério e pragmático.',
        bio: `Kento Nanami é um ex-salariado que retornou ao mundo das maldições como feiticeiro. Conhecido por sua abordagem prática e meticulosa, ele valoriza a eficiência e tem um forte senso de dever.`,
        image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTsVQM_RCyOq-HApzXsJheE61ER3RQaHiRVMg&s',
        tags: ['Professor','Pragmático' ]
      },
      {
        id: 'mahito',
        name: 'Mahito',
        role: 'Antagonista',
        grade: 'Especial', // Maldição
        gradeClass: 'grade-special',
        short: 'Maldição que manipula almas.',
        bio: `Mahito é uma maldição que representa o medo humano da transformação. Ele possui a habilidade de manipular as almas das pessoas, o que lhe permite alterar suas formas físicas de maneiras grotescas.`,
        image: 'https://pnganime.com/web/image-thumbnails/436/788-lg.png',
        tags: ['Antagonista','Maldição']
      },
      { 
        id: 'maki',
        name: 'Maki Zenin',
        role: 'Aluno',
        grade: 'Grau 1',
        gradeClass: 'grade-1',
        short: 'Determinação e força sem igual.',
        bio: `Maki é uma estudante do clã Zenin que, apesar de não possuir energia amaldiçoada, compensa com habilidades físicas excepcionais e o uso de armas amaldiçoadas. Ela luta contra os preconceitos dentro de seu próprio clã.`,
        image: 'https://upload.wikimedia.org/wikipedia/pt/3/30/Maki_Zenin.png',
        tags: ['Aluno','Clã Zenin', 'Restrição Celestial', 'Armas Amaldiçoadas']
      },
      { 
        id: 'panda',
        name: 'Panda',
        role: 'Aluno',
        grade: 'Grau 1',
        gradeClass: 'grade-1',
        short: 'Feiticeiro único e forte.',
        bio: `Panda é um ser especial criado pelo Diretor Masamichi Yaga. Apesar de sua aparência incomum, ele é um feiticeiro poderoso e leal aos seus amigos.`,
        image: 'https://pbs.twimg.com/media/EvutCUmXMAcmsmS.jpg',
        tags: ['Aluno','Feiticeiro Especial']
      },
      { 
        id: 'toge',
        name: 'Toge Inumaki',
        role: 'Aluno',
        grade: 'Grau 1',
        gradeClass: 'grade-1',
        short: 'Comunica-se com palavras amaldiçoadas.',
        bio: `Toge Inumaki é um estudante que utiliza a Técnica de Fala Amaldiçoada, que lhe permite controlar os outros através de suas palavras. Devido ao perigo de sua habilidade, ele se comunica principalmente usando ingredientes de onigiri.`,
        image: 'https://i.pinimg.com/474x/b3/cc/ce/b3cccec46c68db24b6b856bb9b66b373.jpg',
        tags: ['Aluno','Fala Amaldiçoada', 'Salmão']
      },
      { 
        id: 'yuta',
        name: 'Yuta Okkotsu',
        role: 'Aluno',
        grade: 'Especial',
        gradeClass: 'grade-special',
        short: 'Protagonista de Jujutsu Kaisen 0.',
        bio: `Yuta Okkotsu é o protagonista do filme "Jujutsu Kaisen 0". Ele é um estudante especial que lida com a maldição de sua amiga Rika, que se manifesta como uma poderosa entidade protetora.`,
        image: 'https://upload.wikimedia.org/wikipedia/pt/2/26/Yuta_Okkotsu.png',
        tags: ['Aluno','Protagonista', 'Futuro feiticeiro mais forte']
      },
      { 
        id: "choso",
        name: "Choso",
        role: "Antagonista",
        grade: "Especial",
        gradeClass: "grade-special",
        short: "Maldição de grau especial e irmão dos irmãos sangue amaldiçoados.",
        bio: `Choso é uma maldição de grau especial que faz parte dos Irmãos Sangue Amaldiçoados. Ele é leal à sua família e possui habilidades de manipulação de sangue, tornando-o um adversário formidável para os feiticeiros. Sua história se entrelaça com a de Yuji Itadori, criando uma dinâmica complexa entre inimigos, aliados e irmãos.`,
        image: "https://i.pinimg.com/736x/66/2e/60/662e60b6e89ed7efeee72a3b33346acc.jpg",
        tags: ["Antagonista", "Maldição de Grau Especial", "Irmãos Sangue Amaldiçoados"]
      }
    ];

    // =================================================================
    // 2. DADOS DAS LUTAS
    // =================================================================
    const fights = [
      {
        name: 'Gojo vs. Jogo',
        role: 'Incidente da Estrada',
        short: 'A primeira demonstração do poder absoluto de Gojo.',
        bio: `Nesta batalha, Jogo tenta emboscar Satoru Gojo para testar sua força. O resultado é humilhante para a maldição.\n\nGojo utiliza a luta como uma aula prática para Yuji Itadori, explicando o funcionamento da Expansão de Domínio ("Vazio Infinito") e decapitando Jogo sem sofrer um arranhão.`,
        image: 'https://i.pinimg.com/736x/22/91/07/2291072dfe3e3bd3ac02ebb2a44d6ab3.jpg',
        tags: ['Vencedor: Gojo', 'Expansão de Domínio']
      },
      {
        name: 'Itadori & Todo vs. Hanami',
        role: 'Evento de Intercâmbio',
        short: 'O nascimento dos "Melhores Amigos".',
        bio: `Durante a invasão da escola, Aoi Todo ensina Yuji a controlar melhor sua energia amaldiçoada. Juntos, eles desencadeiam uma barragem de golpes contra a maldição de grau especial Hanami.\n\nFoi aqui que Yuji bateu o recorde de Kokusen (Black Flash) consecutivos.E Satoru Gojo finaliza a luta com seu apice de poder, vazio roxo.`,
        image: 'https://i.pinimg.com/originals/14/94/85/14948535b60c6638fef9816d30eeca93.jpg',
        tags: ['Vencedor: Interrompida', 'Black Flash']
      },
      {
        name: 'Gojo vs. Toji',
        role: 'Arco do Passado',
        short: 'O Feiticeiro Mais Forte vs. O Assassino de Feiticeiros.',
        bio: `Toji Fushiguro, um homem sem energia amaldiçoada mas com proeza física celestial, consegue desgastar e "matar" Gojo.\n\nNo entanto, à beira da morte, Gojo compreende a essência da energia amaldiçoada reversa, cura-se e desperta, tornando-se "O Honrado".Derrotando Toji com facilidade após seu despertar utilizando sua técnica ilimitada junto com seu vazio roxo.`,
        image: 'https://i.redd.it/zmtbfvois9gb1.jpg',
        tags: ['Vencedor: Gojo', 'Despertar', 'Energia Reversa', 'Vazio Roxo']
      },
      {
        name: 'Sukuna vs. Mahoraga',
        role: 'Incidente de Shibuya',
        short: 'Batalha de titãs em Shibuya.',
        bio: `Megumi invoca Mahoraga num ritual suicida. Sukuna intervém e enfrenta o Shikigami mais poderoso.\n\nSukuna precisa usar sua Expansão de Domínio e a flecha de fogo para destruir Mahoraga antes que ele se adapte a todos os seus ataques. A cidade é devastada no processo.`,
        image: 'https://i.redd.it/i0of3yu3rjl51.jpg',
        tags: ['Vencedor: Sukuna', 'Destruição Total']
      },
      {
        name: 'Maki vs clan Zenin',
        role: 'Rebelião Zenin',
        short: 'O massacre da clã Zenin.',
        bio: `Maki enfrenta sozinha os membros do clã Zenin que a desprezaram por não possuir energia amaldiçoada.\n\nCom força e habilidade excepcionais, Maki derrota vários membros do clã, incluindo sua própria família, e desafia as tradições opressivas do clã Zenin. Sua vitória simboliza uma mudança na estrutura de poder dentro do mundo dos feiticeiros a aproximando do nivel de Toji Fushiguro.`,
        image: 'https://i.redd.it/ccl12h7bglpd1.jpeg',
        tags: ['Vencedor: Maki', 'Rebelião']
      }
    ];

    // =================================================================
    // 3. DADOS DOS PODERES
    // =================================================================
    const powers = [
      {
        name: 'Kokusen (Black Flash)',
        role: 'Distorção Espacial',
        short: 'Impacto com potência ao quadrado.',
        bio: `O Kokusen (Raio Negro) é um fenômeno que ocorre quando a energia amaldiçoada colide com um alvo dentro de 0,000001 segundos após o golpe físico.\n\nO espaço se distorce e a energia pisca em preto, ampliando a potência do golpe para a potência de 2,5. Não é uma técnica que se possa ativar à vontade, exige concentração extrema.`,
        image: 'https://static1.cbrimages.com/wordpress/wp-content/uploads/2021/03/Jujutsu-Kaisen-Yuji-Itadori-Black-Flash.jpg',
        tags: ['Recordista: Yuji Itadori', 'Dano Crítico']
      },
      {
        name: 'Expansão de Domínio',
        role: 'Técnica Suprema',
        short: 'Manifestação da área inata do usuário.',
        bio: `O auge da feitiçaria Jujutsu. O usuário expande sua energia amaldiçoada para construir um espaço separado da realidade (uma barreira) onde suas técnicas têm acerto garantido.\n\nÉ uma manobra de alto risco e alta recompensa, consumindo muita energia. Exemplos incluem o "Vazio Infinito" de Gojo e o "Santuário Malevolente" de Sukuna.`,
        image: 'https://static1.cbrimages.com/wordpress/wp-content/uploads/2020/11/Gojo-Satoru-Domain-Expansion-Infinite-Void.jpg',
        tags: ['Barreira', 'Acerto Garantido']
      },
      {
        name: 'Técnica das Dez Sombras',
        role: 'Técnica Hereditária',
        short: 'Invocação de Shikigamis através das sombras.',
        bio: `A técnica herdada do Clã Zenin, atualmente usada por Megumi Fushiguro. Permite ao usuário invocar até dez tipos diferentes de Shikigami usando sombras como meio.\n\nSe um Shikigami for destruído, seu poder é transferido para os restantes, tornando a matilha mais forte. A invocação final é o general divino Mahoraga.`,
        image: 'https://static0.gamerantimages.com/wordpress/wp-content/uploads/2021/03/Jujutsu-Kaisen-Megumi-Ten-Shadows-Technique.jpg',
        tags: ['Clã Zenin', 'Shikigami', 'Mahoraga']
      },
      {
        name: 'Fala Amaldiçoada',
        role: 'Técnica de Controle',
        short: 'Comando absoluto através da fala.',
        bio: `Usada por Toge Inumaki, essa técnica permite que ele controle as ações dos outros através de comandos verbais. Devido ao perigo de sua habilidade, Toge se comunica principalmente usando ingredientes de onigiri para evitar causar danos acidentais.\n\nPalavras como "Salmão" e "Atum" são usadas para comunicação segura.`,
        image: 'https://static1.cbrimages.com/wordpress/wp-content/uploads/2021/03/Jujutsu-Kaisen-Toge-Inumaki-Cursed-Speech.jpg',
        tags: ['Controle', 'Comandos Verbais']
      }
    ];

    // ===============================================
    // LÓGICA PRINCIPAL
    // ===============================================

    let currentTab = 'chars';
    const grid = document.getElementById('grid');
    const searchEl = document.getElementById('search');
    const filterEl = document.getElementById('filter');
    const domainWrapper = document.getElementById('domainWrapper');
    const overlay = document.getElementById('domainOverlay');
    const body = document.body;

    // --- Tabs & Renderização ---
    function switchTab(tab) {
      currentTab = tab;
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
      filterEl.style.display = (tab === 'chars') ? 'block' : 'none';
      renderApp();
    }

    function renderApp() {
      const q = searchEl.value.toLowerCase();
      const f = filterEl.value.toLowerCase();
      let data = currentTab === 'chars' ? characters : (currentTab === 'fights' ? fights : powers);

      let filtered = data.filter(item => {
        const textMatch = item.name.toLowerCase().includes(q) || item.tags.some(t => t.toLowerCase().includes(q));
        if (currentTab === 'chars' && f !== 'all') {
            const roleMatch = f === 'especial' ? item.gradeClass === 'grade-special' : item.role.toLowerCase() === f;
            return textMatch && roleMatch;
        }
        return textMatch;
      });

      grid.innerHTML = filtered.length ? '' : '<p style="grid-column:1/-1;text-align:center;color:var(--muted)">Nenhum registro encontrado.</p>';

      filtered.forEach(item => {
        const card = document.createElement('article');
        const isAntagonista = currentTab === 'chars' && item.role && item.role.toLowerCase() === 'antagonista';
        card.className = `card ${isAntagonista ? 'antagonista' : ''}`;
        
        let badge = (currentTab === 'chars' && item.grade) ? `<div class="grade-badge ${item.gradeClass}">${item.grade}</div>` : '';
        
        card.innerHTML = `
          ${badge}
          <img class="avatar" src="${item.image}" alt="${item.name}" loading="lazy">
          <div>
            <h3 class="name">${item.name}</h3>
            <div class="role">${item.role}</div>
            <p class="short">${item.short}</p>
            <div class="tags">${item.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
          </div>
        `;
        card.onclick = () => {
          document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
          card.classList.add('active');
          openModal(item);
        };
        grid.appendChild(card);
      });
    }

    // --- Modal ---
    function openModal(item) {
      const root = document.getElementById('modalRoot');
      const isAntagonista = item.role && item.role.toLowerCase() === 'antagonista';

      root.innerHTML = `
        <div class="domain-modal-bg"></div> <div class="modal-backdrop" style="background:transparent">
          <div class="modal">
            <button class="close">✕</button>
            <div class="modal-content">
              <img class="thumb" src="${item.image}">
              <div style="flex:1">
                <h2 style="font-size:32px; margin:0">${item.name}</h2>
                <div style="color:var(--accent); font-weight:bold; margin:8px 0">
                  ${item.role} ${item.grade ? '• ' + item.grade : ''}
                </div>
                <div style="margin-top:20px; line-height:1.6; color:var(--muted)">
                  ${item.bio}
                </div>
                <div class="tags" style="margin-top:24px">
                  ${item.tags.map(t => `<span class="tag" style="background:var(--accent); color:white">${t}</span>`).join('')}
                </div>
              </div>
            </div>
          </div>
        </div>
      `;

      const close = () => {
        root.innerHTML = '';
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
      };
      root.querySelector('.close').onclick = close;
      root.querySelector('.modal-backdrop').onclick = e => {
        if (e.target.className === 'modal-backdrop') close();
      };
    }

    // --- Sistema de Domínio (Temas) ---
    function toggleDomainMenu() {
      domainWrapper.classList.toggle('open');
    }

    function changeTheme(themeName) {
      domainWrapper.classList.remove('open');

      let overlayColor = '';
      if (themeName === 'sukuna') overlayColor = '#dc2626';
      else if (themeName === 'gojo') overlayColor = '#0ea5e9';
      else overlayColor = '#7c3aed';

      // Configura a cor da explosão
      overlay.style.setProperty('--anim-color', overlayColor);

      // Inicia Animação
      body.classList.add('expanding');

      // Troca classes no meio da animação (500ms)
      setTimeout(() => {
        body.classList.remove('theme-sukuna', 'theme-gojo');
        if (themeName !== 'default') {
          body.classList.add(`theme-${themeName}`);
        }
      }, 500); 

      // Limpa animação
      setTimeout(() => {
        body.classList.remove('expanding');
      }, 1000);
    }

    // Fecha dropdown se clicar fora
    document.addEventListener('click', (e) => {
      if (!domainWrapper.contains(e.target)) {
        domainWrapper.classList.remove('open');
      }
    });

    // Event Listeners
    searchEl.oninput = renderApp;
    filterEl.onchange = renderApp;
    
    // Inicialização
    renderApp();
  </script>
</body>
</html>
